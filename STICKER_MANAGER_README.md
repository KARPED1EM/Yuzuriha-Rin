# 表情包管理工具

一个独立的桌面应用程序，用于可视化管理 `data/stickers` 目录下的所有表情包。

## 功能特性

### 核心功能
- ✅ **可视化管理**: 网格视图展示所有表情包，直观易用
- ✅ **中文显示**: 自动将拼音目录名转换为中文显示（如 `zhaohu_yongyu` → `招呼用语`）
- ✅ **拖放导入**: 支持从文件管理器、浏览器直接拖放图片
- ✅ **网络图片**: 支持拖放或粘贴图片URL链接
- ✅ **快速删除**: 点击即可删除不需要的表情包
- ✅ **合集管理**: 
  - 切换不同表情包合集（general、rin等）
  - 新建自定义合集
  - 删除整个合集
- ✅ **统计信息**: 实时显示各合集、类别的表情包数量

### 用户友好
- 🎨 现代化界面设计
- 📊 清晰的统计数据展示
- 🖱️ 简单直观的操作方式
- 💡 为非技术人员优化的用户体验

## 安装依赖

使用 pip 或 uv 安装依赖：

```bash
# 使用 pip
pip install pyqt6

# 或使用 uv (推荐)
uv pip install pyqt6
```

依赖已添加到 `pyproject.toml` 中，可以直接安装项目所有依赖：

```bash
uv pip install -e .
```

## 使用方法

### 启动工具

在项目根目录运行：

```bash
python sticker_manager.py
```

### 基本操作

#### 1. 选择合集
- 在顶部的"当前合集"下拉框中选择要管理的合集（如 general 或 rin）
- 点击"新建合集"可创建新的表情包合集
- 点击"删除合集"可删除当前选中的合集（谨慎操作）

#### 2. 选择类别
- 左侧显示当前合集下的所有类别，用中文显示
- 点击类别名称即可查看该类别下的所有表情包
- 括号中显示该类别的表情包数量
- 选中的类别会高亮显示（蓝色背景）
- 右键点击类别可删除该类别（谨慎操作）
- 点击"➕ 新建类别"可创建新类别：
  - 可从70个预定义类别中选择
  - 也可输入自定义类别名称（拼音）

#### 3. 查看表情包
- 选择类别后，右侧会以网格形式展示所有表情包
- 每个表情包显示缩略图和文件名
- 点击"删除"按钮可移除不需要的表情包

#### 4. 添加表情包

**方法一：拖放本地文件**
- 从文件管理器拖动图片文件到"拖放图片到此处"区域
- 支持 PNG、JPG、JPEG、GIF、WEBP 格式

**方法二：拖放浏览器图片**
- 直接从网页浏览器拖动图片到拖放区域
- 图片会自动保存到当前选中的类别

**方法三：批量导入**
- 点击"批量导入"按钮
- 选择多个图片文件
- 所有文件会添加到当前类别

**方法四：网络图片URL**
- 将图片URL拖放到拖放区域
- 工具会自动下载并保存图片

#### 5. 查看统计
- 底部状态栏实时显示：
  - 当前合集名称
  - 当前合集的类别数
  - 当前合集的表情包总数
  - 所有合集总数
  - 所有表情包总数

#### 6. 刷新
- 点击"刷新"按钮可重新加载所有数据
- 当外部修改了表情包文件时很有用

## 类别映射说明

工具自动识别以下类别（拼音 → 中文）：

### 社交礼仪类
- zhaohu_yongyu → 招呼用语
- limao_yongyu → 礼貌用语
- zhufu_yongyu → 祝福用语
- jieshu_yongyu → 结束用语
- 等...

### 肯定确认类
- kending_haode → 肯定(好的)
- kending_keyi → 肯定(可以)
- kending_enen → 肯定(嗯嗯)
- 等...

### 否定拒绝类
- fouding_buxuyao → 否定(不需要)
- fouding_bukeyi → 否定(不可以)
- fouding_buzhidao → 否定(不知道)
- 等...

### 其他类别
共支持70种不同的意图分类，涵盖：
- 信息查询类
- 信息回答类
- 对话控制类
- 问题异议类
- 状态确认类

完整映射参见 `models/scripts/intent_romaji_mapping.py`

## 目录结构

```
data/stickers/
├── general/          # 通用表情包合集
│   ├── zhaohu_yongyu/
│   │   ├── image1.png
│   │   └── image2.webp
│   ├── kending_haode/
│   └── ...
├── rin/              # Rin专属表情包合集
│   ├── zhaohu_yongyu/
│   └── ...
└── [自定义合集]/     # 你创建的新合集
```

## 注意事项

1. **删除操作不可恢复**: 删除表情包或合集后无法撤销，请谨慎操作
2. **先选择类别**: 添加表情包前必须先选择合集和类别
3. **支持的格式**: PNG、JPG、JPEG、GIF、WEBP
4. **自动创建目录**: 如果类别目录不存在，工具会自动创建

## 技术细节

- **开发语言**: Python 3.10+
- **GUI框架**: PyQt6
- **独立运行**: 完全独立于主项目，不依赖项目的其他模块
- **跨平台**: 支持 Windows、macOS、Linux

## 故障排除

### 启动失败
确保已安装 PyQt6：
```bash
pip install pyqt6
```

### 找不到表情包目录
工具会自动在当前目录下查找 `data/stickers`，确保在项目根目录运行。

### 拖放不工作
某些Linux发行版可能需要额外的系统依赖，请查阅PyQt6文档。

## 贡献

这是一个独立的辅助工具，与主项目功能完全分离，方便非技术人员管理表情包资源。
